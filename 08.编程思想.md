# '道法术器'

“形而上者谓之道，形而下者谓之器。”

## 道

道，是宇宙万物的本源，是宇宙万物运行的规律。

ETC：easy to change

## 法

[SOLID](./05.SOLID原则.md)
L 里氏替换原则：用父子类一个关系的说明，子类必须能够替换父类，具体操作去做一个父子类继承的时候，子类一定要实现所有父类的抽象方法，以至于用子类去替换父类的时候，不会导致一些负面的效果。
I 接口隔离原则：设计接口的时候，一定要把接口拆分的很小，尽可能的去避免耦合。
D 依赖倒置原则：树形结构，有根节点和子节点，依赖是单个方向的，不能父节点需要依赖子节点内容，依赖是杂乱的就会导致很多问题。
Lod 迪米克法则 （不要和陌生人说话）：对象和对象之间的暴露，依赖的模块和模块之间，这是广义的，一定就是控制暴露出去的东西，不必要暴露的就不要暴露，用一些私有变量和方法去实现，vue3 的 expose ，ref 调用。
Lod 别称：最少支持原则
CRP 合成复用原则 （组合优于继承）：函数式编程，用一系列单一的职责的小功能函数，去组合干一件事情，这样的灵活度优于父类继承这种场景。降低耦合度，提高灵活性。class 继承也是有他的应用场景的。

DRY （don't repeat yourself）: 能去抽离的，就去抽离，不要一次一次的重复。但是要当心 过度设计，（事不过三，三则重构），三次是基准线，超过三次，就要开始重构了。不超过三次，不要过度设计。
YAGNI（you aren't gonna need it）：你不会需要它。不要过度设计，不要预测未来。
YAGNI 别称：不要做无用功
KISS（keep it simple, stupid）：保持简单，不要过度设计。(代码是给人看的，机器码是给机器看的)

根据 KISS 扩展：
复杂度高的代码，逻辑嵌套层级超过三层的代码一定不要超过 300 行。
如果是扁平的，就不需要关注我们代码行数了，过于教条会限制自己。

扁平

```typescript
/// bad
function bar(){
  if(...){

  }else if(...){
    if(...){}
  }
}

/// good
function bar(){
  if(...){
    ...
    return
  }
  if(...){
    ...
    return
  }
  return
}
```

代码需要 自解释/自注释 （注释过多，反而是不好的，说明代码太烂了，好代码可以读出意图）

圈复杂度：控制代码复杂度的一个小工具。（插件可以计算）

测试方面：先考虑正常场景，再考虑边界值。测试用例针对这个值至少写三条，正常值，最大值，最小值。一定把边界写测试用例，超过最大值会报错，小于最小值会报错。

## 术

1. 函数式编程
2. 设计模式
3. 重构方法
4. 测试方法
5. 优化方法
6. 数据结构/算法

- 《重构》书
- 代码坏味道：有某些特征的代码，要警觉，可能会出现屎山，写出这种代码的初期，就要考虑怎么去重构了。
  - 重复代码
  - 长函数
  - 过长的参数列表（四五个参数，可以引入一个参数对象）
  - 过大的类
  - switch 泛滥（逻辑分支过于复杂） / 圈复杂度高
  - 夸夸其谈未来性（不要过度设计）
  - 过多的注释

## 器

工具/框架/拓展（比如 Vue, CI/CD 一些工具，圈复杂度插件）

圈复杂度插件：CodeMetrics （最大值 10 比较合理，在往上就标红了）
